<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Code Blocks</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/ebook.css">
    <link rel="stylesheet" href="styles/eink.css">
</head>
<body class="eink-mode">
    <div style="padding: 2rem; max-width: 800px; margin: 0 auto;">
        <h1>FASM Code Block Test</h1>
        
        <!-- Current interactive code block structure -->
        <div class="code-block interactive-code-block">
            <div class="code-header">
                <span class="code-language">ASSEMBLY</span>
                <button class="code-copy" onclick="copyCodeToClipboard(this)" title="Copy to clipboard">ðŸ“‹</button>
            </div>
            <pre><code class="language-assembly">format PE console
entry start

include 'win32a.inc'

section '.data' data readable writeable
    message db 'Welcome to the Machine!', 13, 10, 0
    counter dd 0
    
section '.code' code readable executable
start:
    mov eax, [counter]    ; Load counter value
    inc eax               ; Increment
    mov [counter], eax    ; Store back
    
    push message          ; Push message address
    call [printf]         ; Call printf function
    add esp, 4           ; Clean stack
    
    push 0               ; Exit code
    call [ExitProcess]   ; Exit program</code></pre>
        </div>
        
        <h2>Regular code block for comparison</h2>
        <pre><code>mov eax, ebx
add eax, 10
ret</code></pre>
    </div>
    
    <script>
    function copyCodeToClipboard(button) {
        const codeBlock = button.closest('.code-block').querySelector('code');
        if (codeBlock) {
            const text = codeBlock.textContent || codeBlock.innerText;
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'âœ“';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy code:', err);
                button.textContent = 'âœ“';
                setTimeout(() => {
                    button.textContent = 'ðŸ“‹';
                }, 2000);
            });
        }
    }
    </script>
</body>
</html>